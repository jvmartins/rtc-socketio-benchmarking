!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={selfEasyrtcid:"",connectList:{},channelIsActive:{},configureRTCDataChannel:function(){this.setPropertiesRTC(),this.setListeners(),this.connectRTC(),this.setRTCCustomListeners()},setPropertiesRTC:function(){easyrtc.enableDebug(!1),easyrtc.enableVideo(!1),easyrtc.enableAudio(!1),easyrtc.enableVideoReceive(!1),easyrtc.enableAudioReceive(!1),easyrtc.enableDataChannels(!0)},setListeners:function(){easyrtc.setDataChannelOpenListener(this.openListener),easyrtc.setDataChannelCloseListener(this.closeListener)},setRTCCustomListeners:function(){},connectRTC:function(){easyrtc.connect("easyrtc.dataMessaging",this.loginSuccess,this.loginFailure)},openListener:function(a){this.channelIsActive[a]=!0},closeListener:function(a){this.channelIsActive[a]=!1},loginSuccess:function(a){this.selfEasyrtcid=a,console.log("Connected to RTC channel as: "+a)},loginFailure:function(){easyrtc.showError(errorCode,"failure to login")}}},{}],2:[function(a){function b(){h=io.connect("http://rtc-socketio-benchmarking.herokuapp.com/"),$("#connectionSocketIO").parent().removeClass("red"),$("#connectionSocketIO").parent().addClass("green")}function c(){easyrtc.setRoomOccupantListener(d)}function d(a,b){k.connectList=b;var c=Object.keys(b).length;if(console.log("Occupant list updated, size: "+c),c>0)for(var d in k.connectList)console.log("Room occupant: "+d),e(d),i=d;else document.getElementById("send").disabled=!0,console.log("Not connected to any peer via datachannel"),$("#connectionRTC").parent().removeClass("green"),$("#connectionRTC").parent().addClass("red")}function e(a){if(easyrtc.getConnectStatus(a)===easyrtc.NOT_CONNECTED)try{easyrtc.call(a,function(b,c){"datachannel"===c&&(document.getElementById("send").disabled=!1,console.log("Connected to peer via datachannel"),$("#connectionRTC").parent().removeClass("red"),$("#connectionRTC").parent().addClass("green"),k.connectList[a]=!0)},function(b,c){k.connectList[a]=!1,easyrtc.showError(b,c)},function(a){console.log("Was accepted = "+a)})}catch(b){console.log("Saw call error ",b)}else console.log("Already connected to "+easyrtc.idToName(a))}function f(){var a="Message",b={message:a,date:Date.now(),messageId:j};g(i,b),h.emit("clientMessage",b),$("#log").html("<p>Message Sent! ("+ ++j+")</p>");var c={platform:navigator.platform,browser:navigator.appName+" "+navigator.appVersion};h.emit("deviceInfo",c)}function g(a,b){easyrtc.getConnectStatus(a)===easyrtc.IS_CONNECTED?(easyrtc.sendDataP2P(a,"msg",b),console.log("Message sent to "+a)):easyrtc.showError("","Not connected to "+easyrtc.idToName(a)+" yet.")}var h,i,j=0,k=a("./commonRTC");$(function(){$("#send").click(f),k.setRTCCustomListeners=c,k.configureRTCDataChannel(),b()})},{"./commonRTC":1}]},{},[2]);